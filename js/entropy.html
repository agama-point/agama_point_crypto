<!DOCTYPE html>
<html lang="cs">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <link rel="stylesheet" href="css/bootstrap.css">
 <link rel="stylesheet" href="css/base.css?cache_bust=${new Date().getTime()}">
 <link rel="stylesheet" href="css/app.css">
 <link rel="stylesheet" href="css/matrix.css">
 <link rel="stylesheet" href="css/histagram.css">
 <title>entropy | sha | xor</title>
 <script src="js/jquery.min.js"></script>
 <script src="js/qrcode.js"></script> 
 <script src="js/agama_functions.js"></script>
<style>
.dice-container {
  display: flex;
  gap: 10px;
  margin-top: 20px;
  color: #ccc;
}

.dice {
  width: 50px;
  height: 50px;
  color: #ccc;
}
</style>

<script>
// ..?cache_bust=${new Date().getTime()}
$(document).ready(function() {
  $('.ico').mouseenter(function() { $(this).css('opacity', '0.5'); }).mouseleave(function() {
     $(this).css('opacity', '0.9'); });

 let fullHash = '';
 $("#matrix").hide().fadeIn(5000);
 $("#subRealpar").hide();
 $("#subDice").hide();
 $("#subExamples").hide();
 $("#xbutt").hide();
 $("#b32").click(function(){ $("#bech32").slideToggle("slow"); });
 $("#ex").click(function(){ $("#subExamples").slideToggle("slow"); });
 $("#brp").click(function(){ $("#subRealpar").slideToggle("slow"); });
 $("#bdice").click(function(){ $("#subDice").slideToggle("slow"); });

 $('#hashForm').on('submit', async function(event) {
    event.preventDefault(); // Zamezení výchozího chování formuláře
     
    const inputText = $('#inputText').val();
    fullHash = await sha256(inputText);        
    $('#input2').val(fullHash);
    $('#result1').html(`<br />${fullHash}`); 
  });

 $('#leftButton').on('click', function() {        
   const inputText = $('#input2').val();
   const inputTextL = inputText.substring(0, 32).toLowerCase();

   $('#result2').html(`<br /><b>${inputTextL}</b><br /><br />`);
   displayHexAsGrid(inputTextL,"gridContainer1");
   $("#xbutt").show();        
  });

  $('#leftButtonThis').on('click', function() { 
   const inputText3 = $('#input3').val();       
   const leftHalf = inputText3.substring(0, 32);
   $('#result2').html(`<br /><b>${leftHalf}</b><br /><br />`);
   displayHexAsGrid(leftHalf,"gridContainer1");
   $("#xbutt").show();        
   });

  $('#rightButton').on('click', function() {        
    //const rightHalf = fullHash.substring(fullHash.length / 2);
    const inputText = $('#input2').val();
    let inputTextL = inputText.substring(32, 64).toLowerCase();

  $('#result2').html(`<br /><b>${inputTextL}</b><br /><br />`);
    displayHexAsGrid(inputTextL,"gridContainer1");
    $("#xbutt").show();         
    });

  $('#xdButton').on('click', function() {        
     const textContent = $('#result2').text();
     $('#input_data').val(textContent);
    });
    
  $('#xkButton').on('click', function() {        
     const textContent = $('#result2').text();
     $('#input_key').val(textContent);
   });

  $('#btnA').on('click', function() { $('#input_key').val("0c1e24e5917779d297e14d45f14e1a1a"); });
  $('#btnT').on('click', function() { $('#input_key').val("752f85035563adff915ac0c3ae1252ed"); });
  $('#btnF2').on('click',function() { $('#input_key').val("6a09e667bb67ae853c6ef372a54ff53a"); });
  $('#btnZ').on('click', function() { $('#input_key').val("00000000000000000000000000000000"); });
  $('#btnF').on('click', function() { $('#input_key').val("ffffffffffffffffffffffffffffffff"); });

  $('#xorButton').on('click', function() {
  const inputData = $('#input_data').val().trim();
  const inputKey = $('#input_key').val().trim();
        
  if (inputData.length === 0 || inputKey.length === 0) {
    $('#xorResult').html('Please enter both input data and key.'); return;}      
        
  //if (inputData.length !== inputKey.length) {
  //$('#xorResult').html('Input data and key must be of the same length.'); return;}
        
  try {
    const xorResult = xorHexStrings(inputData, inputKey);
    const data32 = inputData.padStart(32, '0');
    const key32 = inputKey.padStart(32, '0');

    $('#xorResult').html(`<br>${data32}<br />${key32}<br /> XOR Result-> <br /><b>${xorResult}</b><br /><br />`);
    displayHexAsGrid(xorResult,"gridContainer2");

    $('#qrcode').empty();
    new QRCode(document.getElementById("qrcode"), {
       text: xorResult, width: 128, height: 128,
       colorDark: "Orange", colorLight: "#000000" 
       });  
   } catch (error) {
        $('#xorResult').html(`<br>${inputData}<br>${inputKey}<br>Invalid hex input.`);
   }
});

 $('#convertToBech32').on('click', function() {
      const binaryInput = $('#binaryInput').val();
      let binaryString = binaryInput;
      while (binaryString.length % 5 !== 0) {binaryString = '0' + binaryString;}

      let bech32Result = binaryStringToBech32String(binaryInput);
      $('#bech32Output').html(`${binaryString}: ${bech32Result}<br /><br />`); 
  });

  $('#convertToBinary').on('click', function() {
      const bech32Input = $('#bech32Input').val();
      let binaryResult = bech32StringToBinaryString(bech32Input);
      let num = binaryToNum(binaryResult);
      $('#binaryOutput').html(`${binaryResult} (${num})<br />`);
  });

   $('#goButtonRP').click(function() {
      let initialValue = parseFloat($('#initialValue').val());
      let xx = initialValue;
      let output = "";
      let longHex = "";
        
      for(let i = 1; i < 60; i++) {
         xx = 4 * xx * (1 - xx);
         //output += i + " > " + xx + "\n";
         let frac = fractional(xx, 4);
         output += `${frac.hex} | ${i} > ${xx}\n`;
         longHex += frac.hex; }
        
      let parabEntropy = calculateEntropyFromHex(longHex);
   
      let histagram = getHexHist(longHex);
      let histStr="";
      for (let char in histagram) { histStr += `${char}:${histagram[char]}|`; }

      $('#outputBoxRP').html(output);
      //$('#outputRP').html(splitLongString(longHex));
      $('#preRP').html(`${splitLongString(longHex)} <b>${parabEntropy}</b><br/>${histStr}`);
      drawHistagram(histagram, 'histagramContainerRP');
    });   
});
</script>

</head>

<body>
<div class="wrap">
| <a href="https://www.agamapoint.com/">AgamaPoint</a> | <a href="https://www.agamapoint.com/bip39/">bip39</a> | <a href="https://www.agamapoint.com/bip39/words.html">words</a> | entropy "generator" | <a href="https://www.agamapoint.com/bip39/iting.html">iTing</a> | <a href="https://www.agamapoint.com/games">g_m_s</a> | <a href="test_game.html">G</a> | <a href="testy.html">T</a> | <a href="mm_bips.html">mm_bips</a> | 
<hr /><br />

<h1>
<object class="ico" type="image/svg+xml" data="svg/noise50x50.svg" width="50" height="50">
  <img src="fallback.png" alt="Chat icon fallback">
</object>
Entropy | SHA | XOR</h1>

<div id="matrix"></div>
<script src="js/matrix.js"></script>

<div class="div_form">
  random: <i><span id="numbers"></span></i><br />
  Entropy: <b><span id="entropy">0</span></b><br /><br />
  <button id="continueButton" class="btn btn-warning"><img src="icon/skip-end-btn.svg"> CONTINUE </button>
  <button id="stopButton" class="btn btn-warning"><img src="icon/pause-btn.svg"> STOP/SET </button>
  <button class="btn btn-success" id="trashEntrop"><img src="icon/trash.svg"></button>
  <pre class="bla_gre">entropy_hex:<br /><span id="hexNumber"></span> (<b><span id="hexLength">..</span></b>)
  <span id="rndHist">.:.:.</span></pre>
<br />

-> <a href="https://www.agamapoint.com/bip39/entropy_matrix10x10.html">visual</a> test2.
</div>

<script>
 let numbers = [];
 const numbersElement = $('#numbers');
 const entropyElement = $('#entropy');
 const hexNumberElement = $('#hexNumber');
 const hexLengthElement = $('#hexLength');
 let intervalId;
 let generateInterval = 200; // 0.2 sekundy
 let slowGenerateInterval = 1000; // 1-5 sekund
 let currentInterval = generateInterval;
 let entropyThreshold = 3.2; // Entropie pro změnu intervalu na slowGenerateInterval
 let autoUpdateHexInterval = 5000; // aktualizace hex každých 5 sekund
 let maxHexLength = 512; // Max délka hex čísla, po které je stop
 //let { hexString, hexLength } = "",0;
 //let hexString = "";
 //let hexLength = 0;

 function generateRandomNumber() {
    const randomNumber = Math.floor(Math.random() * 10); // RND 0-9
    numbers.push(randomNumber);
    numbersElement.text(numbers.join('')); // 123...
    const entropy = calculateEntropy(numbers);
    entropyElement.text(entropy.toFixed(4));

    // Změna intervalu na 3 spo dosažení entropie 3.2
    if (entropy >= entropyThreshold && currentInterval !== slowGenerateInterval) {
        clearInterval(intervalId);
        currentInterval = slowGenerateInterval;
        intervalId = setInterval(generateRandomNumber, currentInterval);
     }

    // Automatická aktualizace hexadecimálního čísla každých 5 sekund
    if (numbers.length % (autoUpdateHexInterval / generateInterval) === 0) {
       updateHexNumber();
     }

    // Zastavení generování, pokud délka hexadecimálního čísla přesáhne 128 znaků
    if (hexNumberElement.text().length > maxHexLength) {
       clearInterval(intervalId);
    }
 }      

 function updateHexNumber() {
    const { hexString, hexLength } = convertToHex(numbers);
    hexNumberElement.html(splitLongString(hexString));
    hexLengthElement.text(hexLength);
       
    let histagram = getHexHist(hexString);
    let histStr="xxx";
    //for (let char in histagram) { histStr += `${char}:${histagram[char]}|`; } 

    //$('#input2').val(hexString).toLowerCase(); // err.
    $('#input2').val(hexString);
    $('#rndHist').text(histStr);
}

$('#continueButton').on('click', function() {
    intervalId = setInterval(generateRandomNumber, currentInterval);
});

$('#stopButton').on('click', function() {
    clearInterval(intervalId);
    updateHexNumber(); // Aktualizace hexadecimálního čísla při zastavení
});

 $('#trashEntrop').click(function() {
    numbers = [];
    //hexString = "";
    numbersElement.text("...");
    updateHexNumber();
 });


// Původní start interval
intervalId = setInterval(generateRandomNumber, currentInterval);
</script>
 
<br />
<hr /> 
<h2>SHA256 > 128 L/R</h2>
<form id="hashForm">
  <label for="inputText">Input text:</label>
  <input class="w250" type="text" id="inputText" name="inputText" required>
  <button class="btn btn-warning" type="submit">SHA-256</button>
</form>

<hr />
<label for="input2">SHA-256 Hash / hex_entropy:</label>
<input class="custom-input" type="text" id="input2" readonly>
<button class="btn btn-warning" id="leftButton">Left</button>
<button class="btn btn-warning" id="rightButton">Right</button>

<br />/alt input<br />
<input class="custom-input3" type="text" id="input3">
<button class="btn btn-warning" id="leftButtonThis">This</button> 
 
<div class="fc" id="result1"></div> 
<div class="fc" id="result2"></div> 
<div id="gridContainer1" class="mt-3"></div>
<div id="xbutt">
<br />
<button class="btn btn-success" id="xdButton"><img src="icon/arrow-bar-left.svg"> xData</button>
<button class="btn btn-success" id="xkButton"><img src="icon/arrow-bar-left.svg"> xKey</button>
<br />
<label for="input_note">Note</label>
<input type="text" id="input_note" name="note">
</div>

<hr>
<br />
<button class="btn btn-warning" id="bdice"><img src="icon/dice-3.svg"> Dice...</button>
<div id="subDice">
  <div class="div_form">
<button class="btn btn-success" id="goButtonDice"> Roll </button>
<button class="btn btn-success" id="roll12x"> 12x </button>

  <input type="text" id="resultBox">
  <button class="btn btn-success" id="recalcDice"><img src="icon/calculator.svg"></button>
  <button class="btn btn-success" id="trashDice"><img src="icon/trash.svg"></button>

  <div class="dice-container w300 bg_gre pad5 rc10" id="diceContainer"></div>
  <br /><br />
  <div class="histagram w300 bg_bla" id="histagramContainerDice">:.:</div>
  <br />
  <pre class="bla_gre" id="preDice"></pre>

<script>
$(document).ready(function() {
   let longResultString = '';
   let diceContainer = $('#diceContainer');

   //function updateDice(roll) {   };

   $('#roll12x').click(function() {
      const rollDelayMs = 500;
      let counter = 0;
      const interval = setInterval(function() {
         if (counter < 12) {
             $('#goButtonDice').click();
             counter++;
         } else {
             clearInterval(interval);
         }
      }, rollDelayMs); });

   $('#goButtonDice').click(function() {
      let diceRolls = [];
      let diceEntropy = 0;
      let resultString = '';

     for (let i = 0; i < 5; i++) {
        let roll = Math.floor(Math.random() * 6) + 1;
        diceRolls.push(roll);
        resultString += roll;
     }

     $('#resultBox').val(resultString);
     diceContainer.empty(); // Vymazat předchozí ikony

     $.each(diceRolls, function(index, roll) {
         let img = $('<img>');
         img.attr('src', `icon/dice-${roll}-fill.svg`);
         img.addClass('dice');
         diceContainer.append(img);
      });
       
       
     let originalNum = diceToNum(resultString);
     let hexNum = originalNum.toString(16).toUpperCase();
     longResultString = longResultString + hexNum;
     diceEntropy = calculateEntropyFromHex(longResultString);
     let histagram = getHexHist(longResultString);
     let histStr="";
     for (let char in histagram) { histStr += `${char}:${histagram[char]}|`; }
     $('#preDice').html(`Dec: ${originalNum} | Hex: ${hexNum}<br />::<br />${splitLongString(longResultString)} <b>${diceEntropy}</b><br/>${histStr}`);
     drawHistagram(histagram, 'histagramContainerDice');
     });
  
 $('#trashDice').click(function() {
     longResultString = '';
     $('#preDice').html(`:::`)
     diceContainer.empty();
     $('#histagramContainerDice').empty();
     $('#resultBox').val("");
     });

 $('#recalcDice').click(function() { 
     let diceString = $('#resultBox').val();
     let originalNum = diceToNum(diceString);
     let hexNum = originalNum.toString(16).toUpperCase();
     longResultString = longResultString + hexNum;
     diceEntropy = calculateEntropyFromHex(longResultString);
     //$('#preDice').html(`Dec: ${originalNum} | Hex: ${hexNum}<br />::<br />${splitLongString(longResultString)} <b>${diceEntropy}</b><br/>${histStr}`);
     $('#preDice').html(`Dec: ${originalNum} | Hex: ${hexNum}<br />::<br />${splitLongString(longResultString)} <b>${diceEntropy}</b>`);
       });
});
</script>

  </div>
</div>
<hr />
<br />

<button class="btn btn-warning" id="brp"><img src="icon/calculator.svg"> Real parabola...</button>
Stochastic behaviour of a deterministic system 
<span class="bor_sil pad8">f(x<sub>n+1</sub>) = 4*x<sub>n</sub>*(1-x<sub>n</sub>)</span><br />
<div id="subRealpar">
  <div class="div_form">
  <button class="btn btn-success" id="goButtonRP"> Calculate </button> for the initial condition:
  <input class="bg_bla col_sil pad8" type="number" id="initialValue" value="0.1" step="0.01">
  
  <br><br><pre class="bg_bla">
  <textarea class="bg_bla col_sil pad8" id="outputBoxRP" rows="6" cols="39"></textarea></pre>
  <div class="histagram w300 bg_bla" id="histagramContainerRP">:.:</div>
  <br />
  <pre class="bla_gre" id="preRP"></pre>
  </div>
</div>
<hr />
<br />

<h2>XOR</h2>
<div class="div_form">
  <label for="input_data">Data (hex):</label>
  <input type="text" id="input_data" name="input_data">
  <br>
  <label for="input_key">Key (hex):       <u>A</u>ndreas | <u>T</u>REZOR | ZER<u>0</u> | <u>F</u>FF.. |</label>
  <input type="text" id="input_key" name="input_key">

  <img class="ico" src="svg_ico2/sq-left.svg" alt="Chat icon" width="50" height="50" title="left">
  <button class="btn btn-success" id="btnA"> A </button>
  <button class="btn btn-success" id="btnT"> T </button>
  <button class="btn btn-success" id="btnF2"> f2 </button>
  <button class="btn btn-success" id="btnZ"> 0 </button>
  <button class="btn btn-success" id="btnF"> F </button>

  <button class="btn btn-warning" id="xorButton">
  <img src="icon/qr-code.svg" alt="QR Code Icon"> XOR </button>
  <div class="fc" id="xorResult"></div>
  <div id="gridContainer2" class="mt-3"></div>
  <br /><br />
  <div id="qrcode" class="qrcode"></div>
</div>

<br /><br /><br />
<hr />
<br />
<button class="btn btn-warning" id="ex"><img src="icon/file-arrow-down.svg"> Examples...</button><br /><br />
<div class="fc" id="subExamples">
<b>sha(agama)</b> | agama_py: hash_sha256_str("agama")<br />
52589fac98630c603bd5c2b08cb0f6ccf273cc4a4772f0ff28d49a01bc7d2f4b<br />
L: <b>52589fac98630c603bd5c2b08cb0f6cc</b><br />
R:    f273cc4a4772f0ff28d49a01bc7d2f4b<br />
<br><i>LS: false shaft twenty ... grain diet occur</i><br />
LXR: <b>a02b53e6df11fc9f130158b130cdd987</b><br />
<i>XS: parent fold whale ... major island autumn</i>
<br /><br />
<hr />

<b>sha(AgamaPoint)</b><br />
6cfdf76d0f2112db138c801825051e99efc8e7affc532fce4a088ad19844418e<br /> 
L: <b>6cfdf76d0f2112db138c801825051e99</b><br />
R:    efc8e7affc532fce4a088ad19844418e<br />
<br /><i>LS: hollow use swap ... choice element critic</i><br />
<br /><br />
<hr />

<b>e(andreas)</b><br />
0c1e24e5917779d297e14d45f14e1a1a<br />
<br />
<i>left(sha(agama)) xor e(andreas):</i><br />
5e46bb49091475b2ac348ff57dfeecd6<br />
<br />
<br />
e(fractional(sqrt([primes])..)...)<br />
6a09e667bb67ae853c6ef372a54ff53a<br />
<a href="https://www.agamapoint.com/bip39/sha256k8.html">bip39/sha256k8</a>
<br />
<br />

<b>8080...</b><br />
letter 1028 |advice 32 |cage 257 |absurd 8 |amount 64 |doctor 514 |<br />
acoustic 16 |avoid 128 |letter 1028 |advice 32 |cage 257 |above....<br />
<a href="https://www.agamapoint.com/address/index.html">low_ent</a>

<br />
<hr />

<b>e(trezor)</b><br />
752f85035563adff915ac0c3ae1252ed<br />
<br /><br />
<hr />

...r(s(yenda)) x e(trezor):<br />
41abbe611bc73d06baaae964ecaf3fe2<br />
<br /><i>double fuel obscure ... grace soup shift</i>
<br /><br />
<hr />
<b>PoW</b><br />
sha(Agama Point 2664516175) = <b>000000000</b>233ed5eee2d7356789509b04887f318030d0d259c40e4d71e01965c<br />
for "hashrate" 9 nonce = 2664516175<br />
<br />
<hr />

(e=entropy | L=left | R=right | S=seed | X=XoR | ...
</div>

<hr />
<br />
<h2>Links</h2>
| <a href="https://www.agamapoint.com/chaos/">chaos</a> | 

<a href="https://www.agamapoint.com/bip39/bin_edit.html">simple binary editor</a> | 
<a href="https://www.agamapoint.com/bip39/tab_calc.html">tab_calc</a> dec hex bin |  
<a href="https://www.agamapoint.com/bip39/cube_key.html">cube_key</a> |
test: <a href="https://github.com/trezor/python-mnemonic/blob/master/vectors.json">bip39_vectors</a>
<br />
<hr />
<a href="https://www.agamapoint.com/chaos/"> 
<img class="ico" src="svg/galaxy_sil.svg" alt="Chat icon" width="50" height="50" title="chaos"></a>

<a href="https://www.agamapoint.com/bip39/entropy.html"> 
<img class="ico" src="svg/sil_blocks.svg" alt="Chat icon" width="50" height="50" title="entropy"></a>

<a href="https://www.agamapoint.com/sha256/">
<img class="ico" src="svg/fingerprint_sil.svg" alt="Chat icon" width="50" height="50" title="sha256"</a>

<a href="https://www.agamapoint.com/transakce/">
<img class="ico" src="svg/maze_sil.svg" alt="Chat icon" width="50" height="50" title="transaction"></a>

<a href="https://www.agamapoint.com/ukazky-kodu/">
<img class="ico" src="svg/sqspiral_sil.svg" alt="Chat icon" width="50" height="50" title="code"</a>

<a href="https://www.agamapoint.com/blockchain/">
<img class="ico" src="svg/block9.svg" alt="Chat icon" width="50" height="50" title="blockchain"></a>

<a href="https://www.agamapoint.com/cypherpunk/">
<img class="ico" src="svg/anonymou_sil.svg" alt="Chat icon" width="50" height="50" title="cyberpunk"></a>

<a href="https://github.com/agama-point">
<img class="ico" src="svg/github_sil.svg" alt="Chat icon" width="50" height="50" title="github"></a>


</div>   
</body>
</html>